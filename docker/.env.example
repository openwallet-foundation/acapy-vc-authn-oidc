############################################
# Global / Logging
############################################
COMPOSE_PROJECT_NAME=vc-authn
LOG_LEVEL=DEBUG
LOG_WITH_JSON=false
DEBUGGER=false

############################################
# Controller Database (Mongo)
############################################
MONGODB_HOST=controller-db
MONGODB_PORT=27017
MONGODB_NAME=oidccontroller
OIDC_CONTROLLER_DB_USER=changeme
OIDC_CONTROLLER_DB_USER_PWD=changeme


############################################
# OIDC Controller Service
############################################
CONTROLLER_SERVICE_PORT=5000

# Public URLs
CONTROLLER_URL=https://your-public-url.example.com
CONTROLLER_WEB_HOOK_URL=https://your-public-url.example.com/webhooks
CONTROLLER_API_KEY=

# Controller Behavior
CONTROLLER_CAMERA_REDIRECT_URL=wallet_howto
CONTROLLER_PRESENTATION_EXPIRE_TIME=300
CONTROLLER_PRESENTATION_CLEANUP_TIME=86400
CONTROLLER_PRESENTATION_RECORD_RETENTION_HOURS=1
CONTROLLER_CLEANUP_MAX_PRESENTATION_RECORDS=1000
CONTROLLER_CLEANUP_MAX_CONNECTIONS=2000

# Configuration Files & Paths
CONTROLLER_SESSION_TIMEOUT_CONFIG_FILE=/app/controller-config/sessiontimeout.json
CONTROLLER_VARIABLE_SUBSTITUTION_OVERRIDE=/app/controller-config/user_variable_substitution.py
CONTROLLER_TEMPLATE_DIR=/app/controller-config/templates
   
# Verification Options
# NOTE: WebVH plugin requires ACAPY_PROOF_FORMAT=anoncreds and ACAPY_WALLET_TYPE=askar-anoncreds
INVITATION_LABEL="VC-AuthN"
SET_NON_REVOKED=true
ACAPY_PROOF_FORMAT=anoncreds
ACAPY_WALLET_TYPE=askar-anoncreds
USE_OOB_LOCAL_DID_SERVICE=true
USE_CONNECTION_BASED_VERIFICATION=true
USE_URL_DEEP_LINK=false
WALLET_DEEP_LINK_PREFIX=bcwallet://aries_proof-request

# Scaling & Caching
CONTROLLER_REPLICAS=3
USE_REDIS_ADAPTER=false
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0


############################################
# ACA-Py Agent
############################################
AGENT_HOST=localhost
AGENT_NAME="VC-AuthN Agent"

AGENT_HTTP_PORT=8030
AGENT_ADMIN_PORT=8077

# Traction / ACA-Py admin endpoints
AGENT_ADMIN_URL=https://traction-admin.example.com
AGENT_ENDPOINT=https://traction-acapy-endpoint.example.com

AGENT_ADMIN_API_KEY=changeme
AGENT_GENESIS_URL=https://test.bcovrin.vonx.io/genesis
AGENT_WALLET_SEED=your-32-char-seed-here-00000000000000


########################################################
# ACA-Py Wallet / Tenant Identity
#
# When AGENT_TENANT_MODE=multi:
#   ACAPY_TENANT_WALLET_ID  = Wallet ID
#   ACAPY_TENANT_WALLET_KEY = Wallet Key
#
# When AGENT_TENANT_MODE=traction:
#   ACAPY_TENANT_WALLET_ID  = Traction Tenant ID
#   ACAPY_TENANT_WALLET_KEY = Traction Tenant API Key
########################################################
AGENT_TENANT_MODE=traction

ACAPY_TENANT_WALLET_ID=your-tenant-id-here
ACAPY_TENANT_WALLET_KEY=your-tenant-key-here

# Cache TTL for tenant tokens in seconds (default: 3600)
ACAPY_TOKEN_CACHE_TTL=3600

# Legacy (ignored when ACAPY_TENANT_* is set)
MT_ACAPY_WALLET_ID=legacy-wallet-id
MT_ACAPY_WALLET_KEY=legacy-wallet-key


##########################################################
# ACA-Py Single-Tenant Settings (AGENT_TENANT_MODE=single)
##########################################################
ST_ACAPY_ADMIN_API_KEY_NAME=
ST_ACAPY_ADMIN_API_KEY=


##############################
# Wallet Database (PostgreSQL)
##############################
WALLET_TYPE=postgres_storage
WALLET_ENCRYPTION_KEY=key
POSTGRESQL_WALLET_HOST=wallet-db
POSTGRESQL_WALLET_PORT=5432
POSTGRESQL_WALLET_DATABASE=wallet_db
POSTGRESQL_WALLET_USER=walletuser
POSTGRESQL_WALLET_PASSWORD=walletpassword


############################################
# OIDC Client
############################################
OIDC_CLIENT_ID=your-client-id
OIDC_CLIENT_NAME="Your Application Name"
OIDC_CLIENT_REDIRECT_URI=https://your-redirect-url.example.com
OIDC_CLIENT_SECRET=your-client-secret

# OIDC UserInfo / Compatibility Settings
# Enable the /userinfo endpoint (Required for Firebase).
# Defaults to false to preserve architectural intent (ephemeral state).
CONTROLLER_ENABLE_USERINFO_ENDPOINT=false

# Duration in seconds for Access Token validity (Default: 3600).
# In Redis mode, this also synchronizes the data retention period.
OIDC_ACCESS_TOKEN_TTL=3600


############################################
# Keycloak Database
############################################
KEYCLOAK_DB_NAME=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=changeme


############################################
# Keycloak Service
############################################
KEYCLOAK_DB_VENDOR=postgres
KEYCLOAK_DB_ADDR=keycloak-db
KEYCLOAK_USER=admin
KEYCLOAK_PASSWORD=admin
KEYCLOAK_LOGLEVEL=WARN
KEYCLOAK_ROOT_LOGLEVEL=WARN
